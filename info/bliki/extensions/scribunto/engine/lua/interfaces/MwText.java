package info.bliki.extensions.scribunto.engine.lua.interfaces;

import org.luaj.vm2.LuaTable;
import org.luaj.vm2.LuaValue;
import org.luaj.vm2.lib.OneArgFunction;
import org.luaj.vm2.lib.TwoArgFunction;
import org.luaj.vm2.lib.ZeroArgFunction;

import static info.bliki.extensions.scribunto.template.Frame.toLuaString;

// https://github.com/wikimedia/mediawiki-extensions-Scribunto/blob/master/includes/Engines/LuaCommon/TextLibrary.php
public class MwText implements MwInterface {
    @Override
    public String name() {
        return "mw.text";
    }

    @Override
    public LuaTable getInterface() {
        LuaTable table = new LuaTable();

        table.set("unstrip", unstrip());
        table.set("unstripNoWiki", unstripNoWiki());
        table.set("killMarkers", killMarkers());
        table.set("getEntityTable", getEntityTable());
        table.set("jsonEncode", jsonEncode());
        table.set("jsonDecode", jsonDecode());
        return table;
    }

    // Replaces MediaWiki <nowiki> strip markers with the corresponding text.
    // Other types of strip markers are not changed.
    private LuaValue unstripNoWiki() {
        return new OneArgFunction() {
            @Override
            public LuaValue call(LuaValue arg) {
                return toLuaString(unstripNoWiki(arg.tojstring()));
            }
        };
    }
	public static String unstripTag(String str, String tag) {
        StringBuilder sb = new StringBuilder();
        int length = str.length();
        int i = 0, marker;

		String nowiki_marker = MwHtml.MARKER_PREFIX + "-" + tag;
        while (i < length && ((marker = str.indexOf(nowiki_marker, i)) != -1)) {
			sb.append(str, i, marker);
			i = marker + nowiki_marker.length();
			int end = str.indexOf(MwHtml.MARKER_SUFFIX, i);
			if (end != -1) {
				sb.append("<");
				sb.append(tag);
				sb.append(">");
				i = end + MwHtml.MARKER_SUFFIX.length();
			} else break;
        }
		if (i < length)
			sb.append(str, i, length);
        
        return sb.toString();
	}
	public static String unstripNoWiki(String str) {
		return str.contains("nowiki") ? unstripTag(unstripTag(str, "nowiki"), "/nowiki") : str;
	}

    // Removes all MediaWiki strip markers from a string. \127'"`UNIQ--tagname-8 hex digits-QINU`"'\127
    private LuaValue killMarkers() {
        return new OneArgFunction() {
            @Override
            public LuaValue call(LuaValue arg) {
                return toLuaString(killMarkers(arg.tojstring()));
            }
        };
    }

	private static String killMarkers(String str) {
        StringBuilder sb = new StringBuilder();
        int length = str.length();
        int i = 0, marker;
        
        while (i < length && ((marker = str.indexOf(MwHtml.MARKER_PREFIX, i)) != -1)) {
			sb.append(str, i, marker);
			i = marker + MwHtml.MARKER_PREFIX.length();
			int end = str.indexOf(MwHtml.MARKER_SUFFIX, i);
			if (end != -1) {
				i = end + MwHtml.MARKER_SUFFIX.length();
			} else break;
        }
		if (i < length)
			sb.append(str, i, length);
        
        return sb.toString();
	}

    // includes/json/FormatJson.php, mostly wrapper around PHP's json_encode
    private LuaValue jsonEncode() {
        return new TwoArgFunction() {
            @Override
            public LuaValue call(LuaValue value, LuaValue flags) {
				System.out.println("warning: jsonEncode was called, but it is not implemented");
                return null;
            }
        };
    }

    // includes/json/FormatJson.php
    private LuaValue jsonDecode() {
        return new TwoArgFunction() {
            @Override
            public LuaValue call(LuaValue json, LuaValue flags) {
				System.out.println("warning: jsonDecode was called, but it is not implemented");
                return null;
            }
        };
    }

    private LuaValue getEntityTable() {
        return new ZeroArgFunction() {
            @Override
            public LuaValue call() {
                LuaTable table = new LuaTable();
                table.set("&Tab;", "\t");
                table.set("&NewLine;", "\n");
                table.set("&excl;", "!");
                table.set("&quot;", "\"");
                table.set("&num;", "#");
                table.set("&dollar;", "$");
                table.set("&percnt;", "%");
                table.set("&amp;", "&");
                table.set("&apos;", "'");
                table.set("&lpar;", "(");
                table.set("&rpar;", ")");
                table.set("&ast;", "*");
                table.set("&plus;", "+");
                table.set("&comma;", ",");
                table.set("&period;", ".");
                table.set("&sol;", "/");
                table.set("&colon;", ":");
                table.set("&semi;", ";");
                table.set("&lt;", "<");
                table.set("&nvlt;", "<⃒");
                table.set("&equals;", "=");
                table.set("&bne;", "=⃥");
                table.set("&gt;", ">");
                table.set("&nvgt;", ">⃒");
                table.set("&quest;", "?");
                table.set("&commat;", "@");
                table.set("&lbrack;", "[");
                table.set("&bsol;", "\\");
                table.set("&rsqb;", "]");
                table.set("&Hat;", "^");
                table.set("&lowbar;", "_");
                table.set("&grave;", "`");
                table.set("&fjlig;", "fj");
                table.set("&lbrace;", "{");
                table.set("&vert;", "|");
                table.set("&rcub;", "}");
                table.set("&nbsp;", " ");
                table.set("&iexcl;", "¡");
                table.set("&cent;", "¢");
                table.set("&pound;", "£");
                table.set("&curren;", "¤");
                table.set("&yen;", "¥");
                table.set("&brvbar;", "¦");
                table.set("&sect;", "§");
                table.set("&DoubleDot;", "¨");
                table.set("&copy;", "©");
                table.set("&ordf;", "ª");
                table.set("&laquo;", "«");
                table.set("&not;", "¬");
                table.set("&shy;", "­");
                table.set("&reg;", "®");
                table.set("&macr;", "¯");
                table.set("&deg;", "°");
                table.set("&plusmn;", "±");
                table.set("&sup2;", "²");
                table.set("&sup3;", "³");
                table.set("&DiacriticalAcute;", "´");
                table.set("&micro;", "µ");
                table.set("&para;", "¶");
                table.set("&CenterDot;", "·");
                table.set("&Cedilla;", "¸");
                table.set("&sup1;", "¹");
                table.set("&ordm;", "º");
                table.set("&raquo;", "»");
                table.set("&frac14;", "¼");
                table.set("&half;", "½");
                table.set("&frac34;", "¾");
                table.set("&iquest;", "¿");
                table.set("&Agrave;", "À");
                table.set("&Aacute;", "Á");
                table.set("&Acirc;", "Â");
                table.set("&Atilde;", "Ã");
                table.set("&Auml;", "Ä");
                table.set("&Aring;", "Å");
                table.set("&AElig;", "Æ");
                table.set("&Ccedil;", "Ç");
                table.set("&Egrave;", "È");
                table.set("&Eacute;", "É");
                table.set("&Ecirc;", "Ê");
                table.set("&Euml;", "Ë");
                table.set("&Igrave;", "Ì");
                table.set("&Iacute;", "Í");
                table.set("&Icirc;", "Î");
                table.set("&Iuml;", "Ï");
                table.set("&ETH;", "Ð");
                table.set("&Ntilde;", "Ñ");
                table.set("&Ograve;", "Ò");
                table.set("&Oacute;", "Ó");
                table.set("&Ocirc;", "Ô");
                table.set("&Otilde;", "Õ");
                table.set("&Ouml;", "Ö");
                table.set("&times;", "×");
                table.set("&Oslash;", "Ø");
                table.set("&Ugrave;", "Ù");
                table.set("&Uacute;", "Ú");
                table.set("&Ucirc;", "Û");
                table.set("&Uuml;", "Ü");
                table.set("&Yacute;", "Ý");
                table.set("&THORN;", "Þ");
                table.set("&szlig;", "ß");
                table.set("&agrave;", "à");
                table.set("&aacute;", "á");
                table.set("&acirc;", "â");
                table.set("&atilde;", "ã");
                table.set("&auml;", "ä");
                table.set("&aring;", "å");
                table.set("&aelig;", "æ");
                table.set("&ccedil;", "ç");
                table.set("&egrave;", "è");
                table.set("&eacute;", "é");
                table.set("&ecirc;", "ê");
                table.set("&euml;", "ë");
                table.set("&igrave;", "ì");
                table.set("&iacute;", "í");
                table.set("&icirc;", "î");
                table.set("&iuml;", "ï");
                table.set("&eth;", "ð");
                table.set("&ntilde;", "ñ");
                table.set("&ograve;", "ò");
                table.set("&oacute;", "ó");
                table.set("&ocirc;", "ô");
                table.set("&otilde;", "õ");
                table.set("&ouml;", "ö");
                table.set("&divide;", "÷");
                table.set("&oslash;", "ø");
                table.set("&ugrave;", "ù");
                table.set("&uacute;", "ú");
                table.set("&ucirc;", "û");
                table.set("&uuml;", "ü");
                table.set("&yacute;", "ý");
                table.set("&thorn;", "þ");
                table.set("&yuml;", "ÿ");
                table.set("&Amacr;", "Ā");
                table.set("&amacr;", "ā");
                table.set("&Abreve;", "Ă");
                table.set("&abreve;", "ă");
                table.set("&Aogon;", "Ą");
                table.set("&aogon;", "ą");
                table.set("&Cacute;", "Ć");
                table.set("&cacute;", "ć");
                table.set("&Ccirc;", "Ĉ");
                table.set("&ccirc;", "ĉ");
                table.set("&Cdot;", "Ċ");
                table.set("&cdot;", "ċ");
                table.set("&Ccaron;", "Č");
                table.set("&ccaron;", "č");
                table.set("&Dcaron;", "Ď");
                table.set("&dcaron;", "ď");
                table.set("&Dstrok;", "Đ");
                table.set("&dstrok;", "đ");
                table.set("&Emacr;", "Ē");
                table.set("&emacr;", "ē");
                table.set("&Edot;", "Ė");
                table.set("&edot;", "ė");
                table.set("&Eogon;", "Ę");
                table.set("&eogon;", "ę");
                table.set("&Ecaron;", "Ě");
                table.set("&ecaron;", "ě");
                table.set("&Gcirc;", "Ĝ");
                table.set("&gcirc;", "ĝ");
                table.set("&Gbreve;", "Ğ");
                table.set("&gbreve;", "ğ");
                table.set("&Gdot;", "Ġ");
                table.set("&gdot;", "ġ");
                table.set("&Gcedil;", "Ģ");
                table.set("&Hcirc;", "Ĥ");
                table.set("&hcirc;", "ĥ");
                table.set("&Hstrok;", "Ħ");
                table.set("&hstrok;", "ħ");
                table.set("&Itilde;", "Ĩ");
                table.set("&itilde;", "ĩ");
                table.set("&Imacr;", "Ī");
                table.set("&imacr;", "ī");
                table.set("&Iogon;", "Į");
                table.set("&iogon;", "į");
                table.set("&Idot;", "İ");
                table.set("&inodot;", "ı");
                table.set("&IJlig;", "Ĳ");
                table.set("&ijlig;", "ĳ");
                table.set("&Jcirc;", "Ĵ");
                table.set("&jcirc;", "ĵ");
                table.set("&Kcedil;", "Ķ");
                table.set("&kcedil;", "ķ");
                table.set("&kgreen;", "ĸ");
                table.set("&Lacute;", "Ĺ");
                table.set("&lacute;", "ĺ");
                table.set("&Lcedil;", "Ļ");
                table.set("&lcedil;", "ļ");
                table.set("&Lcaron;", "Ľ");
                table.set("&lcaron;", "ľ");
                table.set("&Lmidot;", "Ŀ");
                table.set("&lmidot;", "ŀ");
                table.set("&Lstrok;", "Ł");
                table.set("&lstrok;", "ł");
                table.set("&Nacute;", "Ń");
                table.set("&nacute;", "ń");
                table.set("&Ncedil;", "Ņ");
                table.set("&ncedil;", "ņ");
                table.set("&Ncaron;", "Ň");
                table.set("&ncaron;", "ň");
                table.set("&napos;", "ŉ");
                table.set("&ENG;", "Ŋ");
                table.set("&eng;", "ŋ");
                table.set("&Omacr;", "Ō");
                table.set("&omacr;", "ō");
                table.set("&Odblac;", "Ő");
                table.set("&odblac;", "ő");
                table.set("&OElig;", "Œ");
                table.set("&oelig;", "œ");
                table.set("&Racute;", "Ŕ");
                table.set("&racute;", "ŕ");
                table.set("&Rcedil;", "Ŗ");
                table.set("&rcedil;", "ŗ");
                table.set("&Rcaron;", "Ř");
                table.set("&rcaron;", "ř");
                table.set("&Sacute;", "Ś");
                table.set("&sacute;", "ś");
                table.set("&Scirc;", "Ŝ");
                table.set("&scirc;", "ŝ");
                table.set("&Scedil;", "Ş");
                table.set("&scedil;", "ş");
                table.set("&Scaron;", "Š");
                table.set("&scaron;", "š");
                table.set("&Tcedil;", "Ţ");
                table.set("&tcedil;", "ţ");
                table.set("&Tcaron;", "Ť");
                table.set("&tcaron;", "ť");
                table.set("&Tstrok;", "Ŧ");
                table.set("&tstrok;", "ŧ");
                table.set("&Utilde;", "Ũ");
                table.set("&utilde;", "ũ");
                table.set("&Umacr;", "Ū");
                table.set("&umacr;", "ū");
                table.set("&Ubreve;", "Ŭ");
                table.set("&ubreve;", "ŭ");
                table.set("&Uring;", "Ů");
                table.set("&uring;", "ů");
                table.set("&Udblac;", "Ű");
                table.set("&udblac;", "ű");
                table.set("&Uogon;", "Ų");
                table.set("&uogon;", "ų");
                table.set("&Wcirc;", "Ŵ");
                table.set("&wcirc;", "ŵ");
                table.set("&Ycirc;", "Ŷ");
                table.set("&ycirc;", "ŷ");
                table.set("&Yuml;", "Ÿ");
                table.set("&Zacute;", "Ź");
                table.set("&zacute;", "ź");
                table.set("&Zdot;", "Ż");
                table.set("&zdot;", "ż");
                table.set("&Zcaron;", "Ž");
                table.set("&zcaron;", "ž");
                table.set("&fnof;", "ƒ");
                table.set("&imped;", "Ƶ");
                table.set("&gacute;", "ǵ");
                table.set("&jmath;", "ȷ");
                table.set("&circ;", "ˆ");
                table.set("&Hacek;", "ˇ");
                table.set("&Breve;", "˘");
                table.set("&dot;", "˙");
                table.set("&ring;", "˚");
                table.set("&ogon;", "˛");
                table.set("&DiacriticalTilde;", "˜");
                table.set("&DiacriticalDoubleAcute;", "˝");
                table.set("&DownBreve;", "̑");
                table.set("&Alpha;", "Α");
                table.set("&Beta;", "Β");
                table.set("&Gamma;", "Γ");
                table.set("&Delta;", "Δ");
                table.set("&Epsilon;", "Ε");
                table.set("&Zeta;", "Ζ");
                table.set("&Eta;", "Η");
                table.set("&Theta;", "Θ");
                table.set("&Iota;", "Ι");
                table.set("&Kappa;", "Κ");
                table.set("&Lambda;", "Λ");
                table.set("&Mu;", "Μ");
                table.set("&Nu;", "Ν");
                table.set("&Xi;", "Ξ");
                table.set("&Omicron;", "Ο");
                table.set("&Pi;", "Π");
                table.set("&Rho;", "Ρ");
                table.set("&Sigma;", "Σ");
                table.set("&Tau;", "Τ");
                table.set("&Upsilon;", "Υ");
                table.set("&Phi;", "Φ");
                table.set("&Chi;", "Χ");
                table.set("&Psi;", "Ψ");
                table.set("&Omega;", "Ω");
                table.set("&alpha;", "α");
                table.set("&beta;", "β");
                table.set("&gamma;", "γ");
                table.set("&delta;", "δ");
                table.set("&epsi;", "ε");
                table.set("&zeta;", "ζ");
                table.set("&eta;", "η");
                table.set("&theta;", "θ");
                table.set("&iota;", "ι");
                table.set("&kappa;", "κ");
                table.set("&lambda;", "λ");
                table.set("&mu;", "μ");
                table.set("&nu;", "ν");
                table.set("&xi;", "ξ");
                table.set("&omicron;", "ο");
                table.set("&pi;", "π");
                table.set("&rho;", "ρ");
                table.set("&sigmav;", "ς");
                table.set("&sigma;", "σ");
                table.set("&tau;", "τ");
                table.set("&upsi;", "υ");
                table.set("&phi;", "φ");
                table.set("&chi;", "χ");
                table.set("&psi;", "ψ");
                table.set("&omega;", "ω");
                table.set("&thetasym;", "ϑ");
                table.set("&upsih;", "ϒ");
                table.set("&straightphi;", "ϕ");
                table.set("&piv;", "ϖ");
                table.set("&Gammad;", "Ϝ");
                table.set("&gammad;", "ϝ");
                table.set("&varkappa;", "ϰ");
                table.set("&rhov;", "ϱ");
                table.set("&straightepsilon;", "ϵ");
                table.set("&backepsilon;", "϶");
                table.set("&IOcy;", "Ё");
                table.set("&DJcy;", "Ђ");
                table.set("&GJcy;", "Ѓ");
                table.set("&Jukcy;", "Є");
                table.set("&DScy;", "Ѕ");
                table.set("&Iukcy;", "І");
                table.set("&YIcy;", "Ї");
                table.set("&Jsercy;", "Ј");
                table.set("&LJcy;", "Љ");
                table.set("&NJcy;", "Њ");
                table.set("&TSHcy;", "Ћ");
                table.set("&KJcy;", "Ќ");
                table.set("&Ubrcy;", "Ў");
                table.set("&DZcy;", "Џ");
                table.set("&Acy;", "А");
                table.set("&Bcy;", "Б");
                table.set("&Vcy;", "В");
                table.set("&Gcy;", "Г");
                table.set("&Dcy;", "Д");
                table.set("&IEcy;", "Е");
                table.set("&ZHcy;", "Ж");
                table.set("&Zcy;", "З");
                table.set("&Icy;", "И");
                table.set("&Jcy;", "Й");
                table.set("&Kcy;", "К");
                table.set("&Lcy;", "Л");
                table.set("&Mcy;", "М");
                table.set("&Ncy;", "Н");
                table.set("&Ocy;", "О");
                table.set("&Pcy;", "П");
                table.set("&Rcy;", "Р");
                table.set("&Scy;", "С");
                table.set("&Tcy;", "Т");
                table.set("&Ucy;", "У");
                table.set("&Fcy;", "Ф");
                table.set("&KHcy;", "Х");
                table.set("&TScy;", "Ц");
                table.set("&CHcy;", "Ч");
                table.set("&SHcy;", "Ш");
                table.set("&SHCHcy;", "Щ");
                table.set("&HARDcy;", "Ъ");
                table.set("&Ycy;", "Ы");
                table.set("&SOFTcy;", "Ь");
                table.set("&Ecy;", "Э");
                table.set("&YUcy;", "Ю");
                table.set("&YAcy;", "Я");
                table.set("&acy;", "а");
                table.set("&bcy;", "б");
                table.set("&vcy;", "в");
                table.set("&gcy;", "г");
                table.set("&dcy;", "д");
                table.set("&iecy;", "е");
                table.set("&zhcy;", "ж");
                table.set("&zcy;", "з");
                table.set("&icy;", "и");
                table.set("&jcy;", "й");
                table.set("&kcy;", "к");
                table.set("&lcy;", "л");
                table.set("&mcy;", "м");
                table.set("&ncy;", "н");
                table.set("&ocy;", "о");
                table.set("&pcy;", "п");
                table.set("&rcy;", "р");
                table.set("&scy;", "с");
                table.set("&tcy;", "т");
                table.set("&ucy;", "у");
                table.set("&fcy;", "ф");
                table.set("&khcy;", "х");
                table.set("&tscy;", "ц");
                table.set("&chcy;", "ч");
                table.set("&shcy;", "ш");
                table.set("&shchcy;", "щ");
                table.set("&hardcy;", "ъ");
                table.set("&ycy;", "ы");
                table.set("&softcy;", "ь");
                table.set("&ecy;", "э");
                table.set("&yucy;", "ю");
                table.set("&yacy;", "я");
                table.set("&iocy;", "ё");
                table.set("&djcy;", "ђ");
                table.set("&gjcy;", "ѓ");
                table.set("&jukcy;", "є");
                table.set("&dscy;", "ѕ");
                table.set("&iukcy;", "і");
                table.set("&yicy;", "ї");
                table.set("&jsercy;", "ј");
                table.set("&ljcy;", "љ");
                table.set("&njcy;", "њ");
                table.set("&tshcy;", "ћ");
                table.set("&kjcy;", "ќ");
                table.set("&ubrcy;", "ў");
                table.set("&dzcy;", "џ");
                table.set("&ensp;", " ");
                table.set("&emsp;", " ");
                table.set("&emsp13;", " ");
                table.set("&emsp14;", " ");
                table.set("&numsp;", " ");
                table.set("&puncsp;", " ");
                table.set("&ThinSpace;", " ");
                table.set("&hairsp;", " ");
                table.set("&ZeroWidthSpace;", "​");
                table.set("&zwnj;", "‌");
                table.set("&zwj;", "‍");
                table.set("&lrm;", "‎");
                table.set("&rlm;", "‏");
                table.set("&hyphen;", "‐");
                table.set("&ndash;", "–");
                table.set("&mdash;", "—");
                table.set("&horbar;", "―");
                table.set("&Verbar;", "‖");
                table.set("&OpenCurlyQuote;", "‘");
                table.set("&rsquo;", "’");
                table.set("&sbquo;", "‚");
                table.set("&OpenCurlyDoubleQuote;", "“");
                table.set("&rdquo;", "”");
                table.set("&bdquo;", "„");
                table.set("&dagger;", "†");
                table.set("&Dagger;", "‡");
                table.set("&bull;", "•");
                table.set("&nldr;", "‥");
                table.set("&hellip;", "…");
                table.set("&permil;", "‰");
                table.set("&pertenk;", "‱");
                table.set("&prime;", "′");
                table.set("&Prime;", "″");
                table.set("&tprime;", "‴");
                table.set("&backprime;", "‵");
                table.set("&lsaquo;", "‹");
                table.set("&rsaquo;", "›");
                table.set("&oline;", "‾");
                table.set("&caret;", "⁁");
                table.set("&hybull;", "⁃");
                table.set("&frasl;", "⁄");
                table.set("&bsemi;", "⁏");
                table.set("&qprime;", "⁗");
                table.set("&MediumSpace;", " ");
                table.set("&ThickSpace;", "  ");
                table.set("&NoBreak;", "⁠");
                table.set("&af;", "⁡");
                table.set("&InvisibleTimes;", "⁢");
                table.set("&ic;", "⁣");
                table.set("&euro;", "€");
                table.set("&TripleDot;", "⃛");
                table.set("&DotDot;", "⃜");
                table.set("&complexes;", "ℂ");
                table.set("&incare;", "℅");
                table.set("&gscr;", "ℊ");
                table.set("&HilbertSpace;", "ℋ");
                table.set("&Hfr;", "ℌ");
                table.set("&Hopf;", "ℍ");
                table.set("&planckh;", "ℎ");
                table.set("&planck;", "ℏ");
                table.set("&imagline;", "ℐ");
                table.set("&Ifr;", "ℑ");
                table.set("&lagran;", "ℒ");
                table.set("&ell;", "ℓ");
                table.set("&naturals;", "ℕ");
                table.set("&numero;", "№");
                table.set("&copysr;", "℗");
                table.set("&wp;", "℘");
                table.set("&primes;", "ℙ");
                table.set("&rationals;", "ℚ");
                table.set("&realine;", "ℛ");
                table.set("&Rfr;", "ℜ");
                table.set("&Ropf;", "ℝ");
                table.set("&rx;", "℞");
                table.set("&trade;", "™");
                table.set("&Zopf;", "ℤ");
                table.set("&mho;", "℧");
                table.set("&Zfr;", "ℨ");
                table.set("&iiota;", "℩");
                table.set("&Bscr;", "ℬ");
                table.set("&Cfr;", "ℭ");
                table.set("&escr;", "ℯ");
                table.set("&expectation;", "ℰ");
                table.set("&Fouriertrf;", "ℱ");
                table.set("&Mellintrf;", "ℳ");
                table.set("&orderof;", "ℴ");
                table.set("&aleph;", "ℵ");
                table.set("&beth;", "ℶ");
                table.set("&gimel;", "ℷ");
                table.set("&daleth;", "ℸ");
                table.set("&CapitalDifferentialD;", "ⅅ");
                table.set("&DifferentialD;", "ⅆ");
                table.set("&exponentiale;", "ⅇ");
                table.set("&ImaginaryI;", "ⅈ");
                table.set("&frac13;", "⅓");
                table.set("&frac23;", "⅔");
                table.set("&frac15;", "⅕");
                table.set("&frac25;", "⅖");
                table.set("&frac35;", "⅗");
                table.set("&frac45;", "⅘");
                table.set("&frac16;", "⅙");
                table.set("&frac56;", "⅚");
                table.set("&frac18;", "⅛");
                table.set("&frac38;", "⅜");
                table.set("&frac58;", "⅝");
                table.set("&frac78;", "⅞");
                table.set("&larr;", "←");
                table.set("&uarr;", "↑");
                table.set("&srarr;", "→");
                table.set("&darr;", "↓");
                table.set("&harr;", "↔");
                table.set("&UpDownArrow;", "↕");
                table.set("&nwarrow;", "↖");
                table.set("&UpperRightArrow;", "↗");
                table.set("&LowerRightArrow;", "↘");
                table.set("&swarr;", "↙");
                table.set("&nleftarrow;", "↚");
                table.set("&nrarr;", "↛");
                table.set("&rarrw;", "↝");
                table.set("&nrarrw;", "↝̸");
                table.set("&Larr;", "↞");
                table.set("&Uarr;", "↟");
                table.set("&twoheadrightarrow;", "↠");
                table.set("&Darr;", "↡");
                table.set("&larrtl;", "↢");
                table.set("&rarrtl;", "↣");
                table.set("&LeftTeeArrow;", "↤");
                table.set("&UpTeeArrow;", "↥");
                table.set("&map;", "↦");
                table.set("&DownTeeArrow;", "↧");
                table.set("&larrhk;", "↩");
                table.set("&rarrhk;", "↪");
                table.set("&larrlp;", "↫");
                table.set("&looparrowright;", "↬");
                table.set("&harrw;", "↭");
                table.set("&nleftrightarrow;", "↮");
                table.set("&Lsh;", "↰");
                table.set("&rsh;", "↱");
                table.set("&ldsh;", "↲");
                table.set("&rdsh;", "↳");
                table.set("&crarr;", "↵");
                table.set("&curvearrowleft;", "↶");
                table.set("&curarr;", "↷");
                table.set("&olarr;", "↺");
                table.set("&orarr;", "↻");
                table.set("&leftharpoonup;", "↼");
                table.set("&leftharpoondown;", "↽");
                table.set("&RightUpVector;", "↾");
                table.set("&uharl;", "↿");
                table.set("&rharu;", "⇀");
                table.set("&rhard;", "⇁");
                table.set("&RightDownVector;", "⇂");
                table.set("&dharl;", "⇃");
                table.set("&rightleftarrows;", "⇄");
                table.set("&udarr;", "⇅");
                table.set("&lrarr;", "⇆");
                table.set("&llarr;", "⇇");
                table.set("&upuparrows;", "⇈");
                table.set("&rrarr;", "⇉");
                table.set("&downdownarrows;", "⇊");
                table.set("&leftrightharpoons;", "⇋");
                table.set("&rightleftharpoons;", "⇌");
                table.set("&nLeftarrow;", "⇍");
                table.set("&nhArr;", "⇎");
                table.set("&nrArr;", "⇏");
                table.set("&DoubleLeftArrow;", "⇐");
                table.set("&DoubleUpArrow;", "⇑");
                table.set("&Implies;", "⇒");
                table.set("&Downarrow;", "⇓");
                table.set("&hArr;", "⇔");
                table.set("&Updownarrow;", "⇕");
                table.set("&nwArr;", "⇖");
                table.set("&neArr;", "⇗");
                table.set("&seArr;", "⇘");
                table.set("&swArr;", "⇙");
                table.set("&lAarr;", "⇚");
                table.set("&rAarr;", "⇛");
                table.set("&zigrarr;", "⇝");
                table.set("&LeftArrowBar;", "⇤");
                table.set("&RightArrowBar;", "⇥");
                table.set("&DownArrowUpArrow;", "⇵");
                table.set("&loarr;", "⇽");
                table.set("&roarr;", "⇾");
                table.set("&hoarr;", "⇿");
                table.set("&forall;", "∀");
                table.set("&comp;", "∁");
                table.set("&part;", "∂");
                table.set("&npart;", "∂̸");
                table.set("&Exists;", "∃");
                table.set("&nexist;", "∄");
                table.set("&empty;", "∅");
                table.set("&nabla;", "∇");
                table.set("&isinv;", "∈");
                table.set("&notin;", "∉");
                table.set("&ReverseElement;", "∋");
                table.set("&notniva;", "∌");
                table.set("&prod;", "∏");
                table.set("&Coproduct;", "∐");
                table.set("&sum;", "∑");
                table.set("&minus;", "−");
                table.set("&MinusPlus;", "∓");
                table.set("&plusdo;", "∔");
                table.set("&ssetmn;", "∖");
                table.set("&lowast;", "∗");
                table.set("&compfn;", "∘");
                table.set("&Sqrt;", "√");
                table.set("&prop;", "∝");
                table.set("&infin;", "∞");
                table.set("&angrt;", "∟");
                table.set("&angle;", "∠");
                table.set("&nang;", "∠⃒");
                table.set("&angmsd;", "∡");
                table.set("&angsph;", "∢");
                table.set("&mid;", "∣");
                table.set("&nshortmid;", "∤");
                table.set("&shortparallel;", "∥");
                table.set("&nparallel;", "∦");
                table.set("&and;", "∧");
                table.set("&or;", "∨");
                table.set("&cap;", "∩");
                table.set("&caps;", "∩︀");
                table.set("&cup;", "∪");
                table.set("&cups;", "∪︀");
                table.set("&Integral;", "∫");
                table.set("&Int;", "∬");
                table.set("&tint;", "∭");
                table.set("&ContourIntegral;", "∮");
                table.set("&DoubleContourIntegral;", "∯");
                table.set("&Cconint;", "∰");
                table.set("&cwint;", "∱");
                table.set("&cwconint;", "∲");
                table.set("&awconint;", "∳");
                table.set("&there4;", "∴");
                table.set("&Because;", "∵");
                table.set("&ratio;", "∶");
                table.set("&Colon;", "∷");
                table.set("&minusd;", "∸");
                table.set("&mDDot;", "∺");
                table.set("&homtht;", "∻");
                table.set("&sim;", "∼");
                table.set("&nvsim;", "∼⃒");
                table.set("&bsim;", "∽");
                table.set("&race;", "∽̱");
                table.set("&ac;", "∾");
                table.set("&acE;", "∾̳");
                table.set("&acd;", "∿");
                table.set("&wr;", "≀");
                table.set("&NotTilde;", "≁");
                table.set("&esim;", "≂");
                table.set("&nesim;", "≂̸");
                table.set("&simeq;", "≃");
                table.set("&nsime;", "≄");
                table.set("&TildeFullEqual;", "≅");
                table.set("&simne;", "≆");
                table.set("&ncong;", "≇");
                table.set("&approx;", "≈");
                table.set("&napprox;", "≉");
                table.set("&ape;", "≊");
                table.set("&apid;", "≋");
                table.set("&napid;", "≋̸");
                table.set("&bcong;", "≌");
                table.set("&CupCap;", "≍");
                table.set("&nvap;", "≍⃒");
                table.set("&bump;", "≎");
                table.set("&nbump;", "≎̸");
                table.set("&HumpEqual;", "≏");
                table.set("&nbumpe;", "≏̸");
                table.set("&esdot;", "≐");
                table.set("&nedot;", "≐̸");
                table.set("&doteqdot;", "≑");
                table.set("&fallingdotseq;", "≒");
                table.set("&risingdotseq;", "≓");
                table.set("&coloneq;", "≔");
                table.set("&eqcolon;", "≕");
                table.set("&ecir;", "≖");
                table.set("&circeq;", "≗");
                table.set("&wedgeq;", "≙");
                table.set("&veeeq;", "≚");
                table.set("&triangleq;", "≜");
                table.set("&equest;", "≟");
                table.set("&NotEqual;", "≠");
                table.set("&Congruent;", "≡");
                table.set("&bnequiv;", "≡⃥");
                table.set("&NotCongruent;", "≢");
                table.set("&leq;", "≤");
                table.set("&nvle;", "≤⃒");
                table.set("&ge;", "≥");
                table.set("&nvge;", "≥⃒");
                table.set("&lE;", "≦");
                table.set("&nlE;", "≦̸");
                table.set("&geqq;", "≧");
                table.set("&NotGreaterFullEqual;", "≧̸");
                table.set("&lneqq;", "≨");
                table.set("&lvertneqq;", "≨︀");
                table.set("&gneqq;", "≩");
                table.set("&gvertneqq;", "≩︀");
                table.set("&ll;", "≪");
                table.set("&nLtv;", "≪̸");
                table.set("&nLt;", "≪⃒");
                table.set("&gg;", "≫");
                table.set("&NotGreaterGreater;", "≫̸");
                table.set("&nGt;", "≫⃒");
                table.set("&between;", "≬");
                table.set("&NotCupCap;", "≭");
                table.set("&NotLess;", "≮");
                table.set("&ngtr;", "≯");
                table.set("&NotLessEqual;", "≰");
                table.set("&ngeq;", "≱");
                table.set("&LessTilde;", "≲");
                table.set("&GreaterTilde;", "≳");
                table.set("&nlsim;", "≴");
                table.set("&ngsim;", "≵");
                table.set("&lessgtr;", "≶");
                table.set("&gl;", "≷");
                table.set("&ntlg;", "≸");
                table.set("&NotGreaterLess;", "≹");
                table.set("&prec;", "≺");
                table.set("&succ;", "≻");
                table.set("&PrecedesSlantEqual;", "≼");
                table.set("&succcurlyeq;", "≽");
                table.set("&precsim;", "≾");
                table.set("&SucceedsTilde;", "≿");
                table.set("&NotSucceedsTilde;", "≿̸");
                table.set("&npr;", "⊀");
                table.set("&NotSucceeds;", "⊁");
                table.set("&sub;", "⊂");
                table.set("&vnsub;", "⊂⃒");
                table.set("&sup;", "⊃");
                table.set("&nsupset;", "⊃⃒");
                table.set("&nsub;", "⊄");
                table.set("&nsup;", "⊅");
                table.set("&SubsetEqual;", "⊆");
                table.set("&supe;", "⊇");
                table.set("&NotSubsetEqual;", "⊈");
                table.set("&NotSupersetEqual;", "⊉");
                table.set("&subsetneq;", "⊊");
                table.set("&vsubne;", "⊊︀");
                table.set("&supsetneq;", "⊋");
                table.set("&vsupne;", "⊋︀");
                table.set("&cupdot;", "⊍");
                table.set("&UnionPlus;", "⊎");
                table.set("&sqsub;", "⊏");
                table.set("&NotSquareSubset;", "⊏̸");
                table.set("&sqsupset;", "⊐");
                table.set("&NotSquareSuperset;", "⊐̸");
                table.set("&SquareSubsetEqual;", "⊑");
                table.set("&SquareSupersetEqual;", "⊒");
                table.set("&sqcap;", "⊓");
                table.set("&sqcaps;", "⊓︀");
                table.set("&sqcup;", "⊔");
                table.set("&sqcups;", "⊔︀");
                table.set("&CirclePlus;", "⊕");
                table.set("&ominus;", "⊖");
                table.set("&CircleTimes;", "⊗");
                table.set("&osol;", "⊘");
                table.set("&CircleDot;", "⊙");
                table.set("&ocir;", "⊚");
                table.set("&oast;", "⊛");
                table.set("&odash;", "⊝");
                table.set("&boxplus;", "⊞");
                table.set("&boxminus;", "⊟");
                table.set("&timesb;", "⊠");
                table.set("&sdotb;", "⊡");
                table.set("&vdash;", "⊢");
                table.set("&dashv;", "⊣");
                table.set("&DownTee;", "⊤");
                table.set("&perp;", "⊥");
                table.set("&models;", "⊧");
                table.set("&DoubleRightTee;", "⊨");
                table.set("&Vdash;", "⊩");
                table.set("&Vvdash;", "⊪");
                table.set("&VDash;", "⊫");
                table.set("&nvdash;", "⊬");
                table.set("&nvDash;", "⊭");
                table.set("&nVdash;", "⊮");
                table.set("&nVDash;", "⊯");
                table.set("&prurel;", "⊰");
                table.set("&vartriangleleft;", "⊲");
                table.set("&vrtri;", "⊳");
                table.set("&LeftTriangleEqual;", "⊴");
                table.set("&nvltrie;", "⊴⃒");
                table.set("&RightTriangleEqual;", "⊵");
                table.set("&nvrtrie;", "⊵⃒");
                table.set("&origof;", "⊶");
                table.set("&imof;", "⊷");
                table.set("&mumap;", "⊸");
                table.set("&hercon;", "⊹");
                table.set("&intcal;", "⊺");
                table.set("&veebar;", "⊻");
                table.set("&barvee;", "⊽");
                table.set("&angrtvb;", "⊾");
                table.set("&lrtri;", "⊿");
                table.set("&xwedge;", "⋀");
                table.set("&xvee;", "⋁");
                table.set("&bigcap;", "⋂");
                table.set("&bigcup;", "⋃");
                table.set("&diamond;", "⋄");
                table.set("&sdot;", "⋅");
                table.set("&Star;", "⋆");
                table.set("&divonx;", "⋇");
                table.set("&bowtie;", "⋈");
                table.set("&ltimes;", "⋉");
                table.set("&rtimes;", "⋊");
                table.set("&lthree;", "⋋");
                table.set("&rthree;", "⋌");
                table.set("&backsimeq;", "⋍");
                table.set("&curlyvee;", "⋎");
                table.set("&curlywedge;", "⋏");
                table.set("&Sub;", "⋐");
                table.set("&Supset;", "⋑");
                table.set("&Cap;", "⋒");
                table.set("&Cup;", "⋓");
                table.set("&pitchfork;", "⋔");
                table.set("&epar;", "⋕");
                table.set("&lessdot;", "⋖");
                table.set("&gtrdot;", "⋗");
                table.set("&Ll;", "⋘");
                table.set("&nLl;", "⋘̸");
                table.set("&Gg;", "⋙");
                table.set("&nGg;", "⋙̸");
                table.set("&lesseqgtr;", "⋚");
                table.set("&lesg;", "⋚︀");
                table.set("&gtreqless;", "⋛");
                table.set("&gesl;", "⋛︀");
                table.set("&curlyeqprec;", "⋞");
                table.set("&cuesc;", "⋟");
                table.set("&NotPrecedesSlantEqual;", "⋠");
                table.set("&NotSucceedsSlantEqual;", "⋡");
                table.set("&NotSquareSubsetEqual;", "⋢");
                table.set("&NotSquareSupersetEqual;", "⋣");
                table.set("&lnsim;", "⋦");
                table.set("&gnsim;", "⋧");
                table.set("&precnsim;", "⋨");
                table.set("&scnsim;", "⋩");
                table.set("&nltri;", "⋪");
                table.set("&ntriangleright;", "⋫");
                table.set("&nltrie;", "⋬");
                table.set("&NotRightTriangleEqual;", "⋭");
                table.set("&vellip;", "⋮");
                table.set("&ctdot;", "⋯");
                table.set("&utdot;", "⋰");
                table.set("&dtdot;", "⋱");
                table.set("&disin;", "⋲");
                table.set("&isinsv;", "⋳");
                table.set("&isins;", "⋴");
                table.set("&isindot;", "⋵");
                table.set("&notindot;", "⋵̸");
                table.set("&notinvc;", "⋶");
                table.set("&notinvb;", "⋷");
                table.set("&isinE;", "⋹");
                table.set("&notinE;", "⋹̸");
                table.set("&nisd;", "⋺");
                table.set("&xnis;", "⋻");
                table.set("&nis;", "⋼");
                table.set("&notnivc;", "⋽");
                table.set("&notnivb;", "⋾");
                table.set("&barwed;", "⌅");
                table.set("&doublebarwedge;", "⌆");
                table.set("&lceil;", "⌈");
                table.set("&RightCeiling;", "⌉");
                table.set("&LeftFloor;", "⌊");
                table.set("&RightFloor;", "⌋");
                table.set("&drcrop;", "⌌");
                table.set("&dlcrop;", "⌍");
                table.set("&urcrop;", "⌎");
                table.set("&ulcrop;", "⌏");
                table.set("&bnot;", "⌐");
                table.set("&profline;", "⌒");
                table.set("&profsurf;", "⌓");
                table.set("&telrec;", "⌕");
                table.set("&target;", "⌖");
                table.set("&ulcorner;", "⌜");
                table.set("&urcorner;", "⌝");
                table.set("&llcorner;", "⌞");
                table.set("&drcorn;", "⌟");
                table.set("&frown;", "⌢");
                table.set("&smile;", "⌣");
                table.set("&cylcty;", "⌭");
                table.set("&profalar;", "⌮");
                table.set("&topbot;", "⌶");
                table.set("&ovbar;", "⌽");
                table.set("&solbar;", "⌿");
                table.set("&angzarr;", "⍼");
                table.set("&lmoust;", "⎰");
                table.set("&rmoust;", "⎱");
                table.set("&OverBracket;", "⎴");
                table.set("&bbrk;", "⎵");
                table.set("&bbrktbrk;", "⎶");
                table.set("&OverParenthesis;", "⏜");
                table.set("&UnderParenthesis;", "⏝");
                table.set("&OverBrace;", "⏞");
                table.set("&UnderBrace;", "⏟");
                table.set("&trpezium;", "⏢");
                table.set("&elinters;", "⏧");
                table.set("&blank;", "␣");
                table.set("&oS;", "Ⓢ");
                table.set("&HorizontalLine;", "─");
                table.set("&boxv;", "│");
                table.set("&boxdr;", "┌");
                table.set("&boxdl;", "┐");
                table.set("&boxur;", "└");
                table.set("&boxul;", "┘");
                table.set("&boxvr;", "├");
                table.set("&boxvl;", "┤");
                table.set("&boxhd;", "┬");
                table.set("&boxhu;", "┴");
                table.set("&boxvh;", "┼");
                table.set("&boxH;", "═");
                table.set("&boxV;", "║");
                table.set("&boxdR;", "╒");
                table.set("&boxDr;", "╓");
                table.set("&boxDR;", "╔");
                table.set("&boxdL;", "╕");
                table.set("&boxDl;", "╖");
                table.set("&boxDL;", "╗");
                table.set("&boxuR;", "╘");
                table.set("&boxUr;", "╙");
                table.set("&boxUR;", "╚");
                table.set("&boxuL;", "╛");
                table.set("&boxUl;", "╜");
                table.set("&boxUL;", "╝");
                table.set("&boxvR;", "╞");
                table.set("&boxVr;", "╟");
                table.set("&boxVR;", "╠");
                table.set("&boxvL;", "╡");
                table.set("&boxVl;", "╢");
                table.set("&boxVL;", "╣");
                table.set("&boxHd;", "╤");
                table.set("&boxhD;", "╥");
                table.set("&boxHD;", "╦");
                table.set("&boxHu;", "╧");
                table.set("&boxhU;", "╨");
                table.set("&boxHU;", "╩");
                table.set("&boxvH;", "╪");
                table.set("&boxVh;", "╫");
                table.set("&boxVH;", "╬");
                table.set("&uhblk;", "▀");
                table.set("&lhblk;", "▄");
                table.set("&block;", "█");
                table.set("&blk14;", "░");
                table.set("&blk12;", "▒");
                table.set("&blk34;", "▓");
                table.set("&Square;", "□");
                table.set("&squarf;", "▪");
                table.set("&EmptyVerySmallSquare;", "▫");
                table.set("&rect;", "▭");
                table.set("&marker;", "▮");
                table.set("&fltns;", "▱");
                table.set("&bigtriangleup;", "△");
                table.set("&blacktriangle;", "▴");
                table.set("&triangle;", "▵");
                table.set("&blacktriangleright;", "▸");
                table.set("&rtri;", "▹");
                table.set("&bigtriangledown;", "▽");
                table.set("&blacktriangledown;", "▾");
                table.set("&triangledown;", "▿");
                table.set("&blacktriangleleft;", "◂");
                table.set("&ltri;", "◃");
                table.set("&lozenge;", "◊");
                table.set("&cir;", "○");
                table.set("&tridot;", "◬");
                table.set("&bigcirc;", "◯");
                table.set("&ultri;", "◸");
                table.set("&urtri;", "◹");
                table.set("&lltri;", "◺");
                table.set("&EmptySmallSquare;", "◻");
                table.set("&FilledSmallSquare;", "◼");
                table.set("&starf;", "★");
                table.set("&star;", "☆");
                table.set("&phone;", "☎");
                table.set("&female;", "♀");
                table.set("&male;", "♂");
                table.set("&spadesuit;", "♠");
                table.set("&clubs;", "♣");
                table.set("&hearts;", "♥");
                table.set("&diamondsuit;", "♦");
                table.set("&sung;", "♪");
                table.set("&flat;", "♭");
                table.set("&natur;", "♮");
                table.set("&sharp;", "♯");
                table.set("&check;", "✓");
                table.set("&cross;", "✗");
                table.set("&maltese;", "✠");
                table.set("&sext;", "✶");
                table.set("&VerticalSeparator;", "❘");
                table.set("&lbbrk;", "❲");
                table.set("&rbbrk;", "❳");
                table.set("&bsolhsub;", "⟈");
                table.set("&suphsol;", "⟉");
                table.set("&LeftDoubleBracket;", "⟦");
                table.set("&RightDoubleBracket;", "⟧");
                table.set("&langle;", "⟨");
                table.set("&RightAngleBracket;", "⟩");
                table.set("&Lang;", "⟪");
                table.set("&Rang;", "⟫");
                table.set("&loang;", "⟬");
                table.set("&roang;", "⟭");
                table.set("&longleftarrow;", "⟵");
                table.set("&LongRightArrow;", "⟶");
                table.set("&LongLeftRightArrow;", "⟷");
                table.set("&xlArr;", "⟸");
                table.set("&DoubleLongRightArrow;", "⟹");
                table.set("&xhArr;", "⟺");
                table.set("&xmap;", "⟼");
                table.set("&dzigrarr;", "⟿");
                table.set("&nvlArr;", "⤂");
                table.set("&nvrArr;", "⤃");
                table.set("&nvHarr;", "⤄");
                table.set("&Map;", "⤅");
                table.set("&lbarr;", "⤌");
                table.set("&bkarow;", "⤍");
                table.set("&lBarr;", "⤎");
                table.set("&dbkarow;", "⤏");
                table.set("&drbkarow;", "⤐");
                table.set("&DDotrahd;", "⤑");
                table.set("&UpArrowBar;", "⤒");
                table.set("&DownArrowBar;", "⤓");
                table.set("&Rarrtl;", "⤖");
                table.set("&latail;", "⤙");
                table.set("&ratail;", "⤚");
                table.set("&lAtail;", "⤛");
                table.set("&rAtail;", "⤜");
                table.set("&larrfs;", "⤝");
                table.set("&rarrfs;", "⤞");
                table.set("&larrbfs;", "⤟");
                table.set("&rarrbfs;", "⤠");
                table.set("&nwarhk;", "⤣");
                table.set("&nearhk;", "⤤");
                table.set("&searhk;", "⤥");
                table.set("&swarhk;", "⤦");
                table.set("&nwnear;", "⤧");
                table.set("&toea;", "⤨");
                table.set("&seswar;", "⤩");
                table.set("&swnwar;", "⤪");
                table.set("&rarrc;", "⤳");
                table.set("&nrarrc;", "⤳̸");
                table.set("&cudarrr;", "⤵");
                table.set("&ldca;", "⤶");
                table.set("&rdca;", "⤷");
                table.set("&cudarrl;", "⤸");
                table.set("&larrpl;", "⤹");
                table.set("&curarrm;", "⤼");
                table.set("&cularrp;", "⤽");
                table.set("&rarrpl;", "⥅");
                table.set("&harrcir;", "⥈");
                table.set("&Uarrocir;", "⥉");
                table.set("&lurdshar;", "⥊");
                table.set("&ldrushar;", "⥋");
                table.set("&LeftRightVector;", "⥎");
                table.set("&RightUpDownVector;", "⥏");
                table.set("&DownLeftRightVector;", "⥐");
                table.set("&LeftUpDownVector;", "⥑");
                table.set("&LeftVectorBar;", "⥒");
                table.set("&RightVectorBar;", "⥓");
                table.set("&RightUpVectorBar;", "⥔");
                table.set("&RightDownVectorBar;", "⥕");
                table.set("&DownLeftVectorBar;", "⥖");
                table.set("&DownRightVectorBar;", "⥗");
                table.set("&LeftUpVectorBar;", "⥘");
                table.set("&LeftDownVectorBar;", "⥙");
                table.set("&LeftTeeVector;", "⥚");
                table.set("&RightTeeVector;", "⥛");
                table.set("&RightUpTeeVector;", "⥜");
                table.set("&RightDownTeeVector;", "⥝");
                table.set("&DownLeftTeeVector;", "⥞");
                table.set("&DownRightTeeVector;", "⥟");
                table.set("&LeftUpTeeVector;", "⥠");
                table.set("&LeftDownTeeVector;", "⥡");
                table.set("&lHar;", "⥢");
                table.set("&uHar;", "⥣");
                table.set("&rHar;", "⥤");
                table.set("&dHar;", "⥥");
                table.set("&luruhar;", "⥦");
                table.set("&ldrdhar;", "⥧");
                table.set("&ruluhar;", "⥨");
                table.set("&rdldhar;", "⥩");
                table.set("&lharul;", "⥪");
                table.set("&llhard;", "⥫");
                table.set("&rharul;", "⥬");
                table.set("&lrhard;", "⥭");
                table.set("&udhar;", "⥮");
                table.set("&ReverseUpEquilibrium;", "⥯");
                table.set("&RoundImplies;", "⥰");
                table.set("&erarr;", "⥱");
                table.set("&simrarr;", "⥲");
                table.set("&larrsim;", "⥳");
                table.set("&rarrsim;", "⥴");
                table.set("&rarrap;", "⥵");
                table.set("&ltlarr;", "⥶");
                table.set("&gtrarr;", "⥸");
                table.set("&subrarr;", "⥹");
                table.set("&suplarr;", "⥻");
                table.set("&lfisht;", "⥼");
                table.set("&rfisht;", "⥽");
                table.set("&ufisht;", "⥾");
                table.set("&dfisht;", "⥿");
                table.set("&lopar;", "⦅");
                table.set("&ropar;", "⦆");
                table.set("&lbrke;", "⦋");
                table.set("&rbrke;", "⦌");
                table.set("&lbrkslu;", "⦍");
                table.set("&rbrksld;", "⦎");
                table.set("&lbrksld;", "⦏");
                table.set("&rbrkslu;", "⦐");
                table.set("&langd;", "⦑");
                table.set("&rangd;", "⦒");
                table.set("&lparlt;", "⦓");
                table.set("&rpargt;", "⦔");
                table.set("&gtlPar;", "⦕");
                table.set("&ltrPar;", "⦖");
                table.set("&vzigzag;", "⦚");
                table.set("&vangrt;", "⦜");
                table.set("&angrtvbd;", "⦝");
                table.set("&ange;", "⦤");
                table.set("&range;", "⦥");
                table.set("&dwangle;", "⦦");
                table.set("&uwangle;", "⦧");
                table.set("&angmsdaa;", "⦨");
                table.set("&angmsdab;", "⦩");
                table.set("&angmsdac;", "⦪");
                table.set("&angmsdad;", "⦫");
                table.set("&angmsdae;", "⦬");
                table.set("&angmsdaf;", "⦭");
                table.set("&angmsdag;", "⦮");
                table.set("&angmsdah;", "⦯");
                table.set("&bemptyv;", "⦰");
                table.set("&demptyv;", "⦱");
                table.set("&cemptyv;", "⦲");
                table.set("&raemptyv;", "⦳");
                table.set("&laemptyv;", "⦴");
                table.set("&ohbar;", "⦵");
                table.set("&omid;", "⦶");
                table.set("&opar;", "⦷");
                table.set("&operp;", "⦹");
                table.set("&olcross;", "⦻");
                table.set("&odsold;", "⦼");
                table.set("&olcir;", "⦾");
                table.set("&ofcir;", "⦿");
                table.set("&olt;", "⧀");
                table.set("&ogt;", "⧁");
                table.set("&cirscir;", "⧂");
                table.set("&cirE;", "⧃");
                table.set("&solb;", "⧄");
                table.set("&bsolb;", "⧅");
                table.set("&boxbox;", "⧉");
                table.set("&trisb;", "⧍");
                table.set("&rtriltri;", "⧎");
                table.set("&LeftTriangleBar;", "⧏");
                table.set("&NotLeftTriangleBar;", "⧏̸");
                table.set("&RightTriangleBar;", "⧐");
                table.set("&NotRightTriangleBar;", "⧐̸");
                table.set("&iinfin;", "⧜");
                table.set("&infintie;", "⧝");
                table.set("&nvinfin;", "⧞");
                table.set("&eparsl;", "⧣");
                table.set("&smeparsl;", "⧤");
                table.set("&eqvparsl;", "⧥");
                table.set("&lozf;", "⧫");
                table.set("&RuleDelayed;", "⧴");
                table.set("&dsol;", "⧶");
                table.set("&xodot;", "⨀");
                table.set("&bigoplus;", "⨁");
                table.set("&bigotimes;", "⨂");
                table.set("&biguplus;", "⨄");
                table.set("&bigsqcup;", "⨆");
                table.set("&iiiint;", "⨌");
                table.set("&fpartint;", "⨍");
                table.set("&cirfnint;", "⨐");
                table.set("&awint;", "⨑");
                table.set("&rppolint;", "⨒");
                table.set("&scpolint;", "⨓");
                table.set("&npolint;", "⨔");
                table.set("&pointint;", "⨕");
                table.set("&quatint;", "⨖");
                table.set("&intlarhk;", "⨗");
                table.set("&pluscir;", "⨢");
                table.set("&plusacir;", "⨣");
                table.set("&simplus;", "⨤");
                table.set("&plusdu;", "⨥");
                table.set("&plussim;", "⨦");
                table.set("&plustwo;", "⨧");
                table.set("&mcomma;", "⨩");
                table.set("&minusdu;", "⨪");
                table.set("&loplus;", "⨭");
                table.set("&roplus;", "⨮");
                table.set("&Cross;", "⨯");
                table.set("&timesd;", "⨰");
                table.set("&timesbar;", "⨱");
                table.set("&smashp;", "⨳");
                table.set("&lotimes;", "⨴");
                table.set("&rotimes;", "⨵");
                table.set("&otimesas;", "⨶");
                table.set("&Otimes;", "⨷");
                table.set("&odiv;", "⨸");
                table.set("&triplus;", "⨹");
                table.set("&triminus;", "⨺");
                table.set("&tritime;", "⨻");
                table.set("&iprod;", "⨼");
                table.set("&amalg;", "⨿");
                table.set("&capdot;", "⩀");
                table.set("&ncup;", "⩂");
                table.set("&ncap;", "⩃");
                table.set("&capand;", "⩄");
                table.set("&cupor;", "⩅");
                table.set("&cupcap;", "⩆");
                table.set("&capcup;", "⩇");
                table.set("&cupbrcap;", "⩈");
                table.set("&capbrcup;", "⩉");
                table.set("&cupcup;", "⩊");
                table.set("&capcap;", "⩋");
                table.set("&ccups;", "⩌");
                table.set("&ccaps;", "⩍");
                table.set("&ccupssm;", "⩐");
                table.set("&And;", "⩓");
                table.set("&Or;", "⩔");
                table.set("&andand;", "⩕");
                table.set("&oror;", "⩖");
                table.set("&orslope;", "⩗");
                table.set("&andslope;", "⩘");
                table.set("&andv;", "⩚");
                table.set("&orv;", "⩛");
                table.set("&andd;", "⩜");
                table.set("&ord;", "⩝");
                table.set("&wedbar;", "⩟");
                table.set("&sdote;", "⩦");
                table.set("&simdot;", "⩪");
                table.set("&congdot;", "⩭");
                table.set("&ncongdot;", "⩭̸");
                table.set("&easter;", "⩮");
                table.set("&apacir;", "⩯");
                table.set("&apE;", "⩰");
                table.set("&napE;", "⩰̸");
                table.set("&eplus;", "⩱");
                table.set("&pluse;", "⩲");
                table.set("&Esim;", "⩳");
                table.set("&Colone;", "⩴");
                table.set("&Equal;", "⩵");
                table.set("&ddotseq;", "⩷");
                table.set("&equivDD;", "⩸");
                table.set("&ltcir;", "⩹");
                table.set("&gtcir;", "⩺");
                table.set("&ltquest;", "⩻");
                table.set("&gtquest;", "⩼");
                table.set("&les;", "⩽");
                table.set("&nles;", "⩽̸");
                table.set("&ges;", "⩾");
                table.set("&nges;", "⩾̸");
                table.set("&lesdot;", "⩿");
                table.set("&gesdot;", "⪀");
                table.set("&lesdoto;", "⪁");
                table.set("&gesdoto;", "⪂");
                table.set("&lesdotor;", "⪃");
                table.set("&gesdotol;", "⪄");
                table.set("&lap;", "⪅");
                table.set("&gap;", "⪆");
                table.set("&lne;", "⪇");
                table.set("&gne;", "⪈");
                table.set("&lnap;", "⪉");
                table.set("&gnap;", "⪊");
                table.set("&lesseqqgtr;", "⪋");
                table.set("&gEl;", "⪌");
                table.set("&lsime;", "⪍");
                table.set("&gsime;", "⪎");
                table.set("&lsimg;", "⪏");
                table.set("&gsiml;", "⪐");
                table.set("&lgE;", "⪑");
                table.set("&glE;", "⪒");
                table.set("&lesges;", "⪓");
                table.set("&gesles;", "⪔");
                table.set("&els;", "⪕");
                table.set("&egs;", "⪖");
                table.set("&elsdot;", "⪗");
                table.set("&egsdot;", "⪘");
                table.set("&el;", "⪙");
                table.set("&eg;", "⪚");
                table.set("&siml;", "⪝");
                table.set("&simg;", "⪞");
                table.set("&simlE;", "⪟");
                table.set("&simgE;", "⪠");
                table.set("&LessLess;", "⪡");
                table.set("&NotNestedLessLess;", "⪡̸");
                table.set("&GreaterGreater;", "⪢");
                table.set("&NotNestedGreaterGreater;", "⪢̸");
                table.set("&glj;", "⪤");
                table.set("&gla;", "⪥");
                table.set("&ltcc;", "⪦");
                table.set("&gtcc;", "⪧");
                table.set("&lescc;", "⪨");
                table.set("&gescc;", "⪩");
                table.set("&smt;", "⪪");
                table.set("&lat;", "⪫");
                table.set("&smte;", "⪬");
                table.set("&smtes;", "⪬︀");
                table.set("&late;", "⪭");
                table.set("&lates;", "⪭︀");
                table.set("&bumpE;", "⪮");
                table.set("&preceq;", "⪯");
                table.set("&NotPrecedesEqual;", "⪯̸");
                table.set("&SucceedsEqual;", "⪰");
                table.set("&NotSucceedsEqual;", "⪰̸");
                table.set("&prE;", "⪳");
                table.set("&scE;", "⪴");
                table.set("&precneqq;", "⪵");
                table.set("&scnE;", "⪶");
                table.set("&precapprox;", "⪷");
                table.set("&succapprox;", "⪸");
                table.set("&precnapprox;", "⪹");
                table.set("&succnapprox;", "⪺");
                table.set("&Pr;", "⪻");
                table.set("&Sc;", "⪼");
                table.set("&subdot;", "⪽");
                table.set("&supdot;", "⪾");
                table.set("&subplus;", "⪿");
                table.set("&supplus;", "⫀");
                table.set("&submult;", "⫁");
                table.set("&supmult;", "⫂");
                table.set("&subedot;", "⫃");
                table.set("&supedot;", "⫄");
                table.set("&subE;", "⫅");
                table.set("&nsubE;", "⫅̸");
                table.set("&supseteqq;", "⫆");
                table.set("&nsupseteqq;", "⫆̸");
                table.set("&subsim;", "⫇");
                table.set("&supsim;", "⫈");
                table.set("&subsetneqq;", "⫋");
                table.set("&vsubnE;", "⫋︀");
                table.set("&supnE;", "⫌");
                table.set("&varsupsetneqq;", "⫌︀");
                table.set("&csub;", "⫏");
                table.set("&csup;", "⫐");
                table.set("&csube;", "⫑");
                table.set("&csupe;", "⫒");
                table.set("&subsup;", "⫓");
                table.set("&supsub;", "⫔");
                table.set("&subsub;", "⫕");
                table.set("&supsup;", "⫖");
                table.set("&suphsub;", "⫗");
                table.set("&supdsub;", "⫘");
                table.set("&forkv;", "⫙");
                table.set("&topfork;", "⫚");
                table.set("&mlcp;", "⫛");
                table.set("&Dashv;", "⫤");
                table.set("&Vdashl;", "⫦");
                table.set("&Barv;", "⫧");
                table.set("&vBar;", "⫨");
                table.set("&vBarv;", "⫩");
                table.set("&Vbar;", "⫫");
                table.set("&Not;", "⫬");
                table.set("&bNot;", "⫭");
                table.set("&rnmid;", "⫮");
                table.set("&cirmid;", "⫯");
                table.set("&midcir;", "⫰");
                table.set("&topcir;", "⫱");
                table.set("&nhpar;", "⫲");
                table.set("&parsim;", "⫳");
                table.set("&parsl;", "⫽");
                table.set("&nparsl;", "⫽⃥");
                table.set("&fflig;", "ﬀ");
                table.set("&filig;", "ﬁ");
                table.set("&fllig;", "ﬂ");
                table.set("&ffilig;", "ﬃ");
                table.set("&ffllig;", "ﬄ");
                table.set("&Ascr;", "𝒜");
                table.set("&Cscr;", "𝒞");
                table.set("&Dscr;", "𝒟");
                table.set("&Gscr;", "𝒢");
                table.set("&Jscr;", "𝒥");
                table.set("&Kscr;", "𝒦");
                table.set("&Nscr;", "𝒩");
                table.set("&Oscr;", "𝒪");
                table.set("&Pscr;", "𝒫");
                table.set("&Qscr;", "𝒬");
                table.set("&Sscr;", "𝒮");
                table.set("&Tscr;", "𝒯");
                table.set("&Uscr;", "𝒰");
                table.set("&Vscr;", "𝒱");
                table.set("&Wscr;", "𝒲");
                table.set("&Xscr;", "𝒳");
                table.set("&Yscr;", "𝒴");
                table.set("&Zscr;", "𝒵");
                table.set("&ascr;", "𝒶");
                table.set("&bscr;", "𝒷");
                table.set("&cscr;", "𝒸");
                table.set("&dscr;", "𝒹");
                table.set("&fscr;", "𝒻");
                table.set("&hscr;", "𝒽");
                table.set("&iscr;", "𝒾");
                table.set("&jscr;", "𝒿");
                table.set("&kscr;", "𝓀");
                table.set("&lscr;", "𝓁");
                table.set("&mscr;", "𝓂");
                table.set("&nscr;", "𝓃");
                table.set("&pscr;", "𝓅");
                table.set("&qscr;", "𝓆");
                table.set("&rscr;", "𝓇");
                table.set("&sscr;", "𝓈");
                table.set("&tscr;", "𝓉");
                table.set("&uscr;", "𝓊");
                table.set("&vscr;", "𝓋");
                table.set("&wscr;", "𝓌");
                table.set("&xscr;", "𝓍");
                table.set("&yscr;", "𝓎");
                table.set("&zscr;", "𝓏");
                table.set("&Afr;", "𝔄");
                table.set("&Bfr;", "𝔅");
                table.set("&Dfr;", "𝔇");
                table.set("&Efr;", "𝔈");
                table.set("&Ffr;", "𝔉");
                table.set("&Gfr;", "𝔊");
                table.set("&Jfr;", "𝔍");
                table.set("&Kfr;", "𝔎");
                table.set("&Lfr;", "𝔏");
                table.set("&Mfr;", "𝔐");
                table.set("&Nfr;", "𝔑");
                table.set("&Ofr;", "𝔒");
                table.set("&Pfr;", "𝔓");
                table.set("&Qfr;", "𝔔");
                table.set("&Sfr;", "𝔖");
                table.set("&Tfr;", "𝔗");
                table.set("&Ufr;", "𝔘");
                table.set("&Vfr;", "𝔙");
                table.set("&Wfr;", "𝔚");
                table.set("&Xfr;", "𝔛");
                table.set("&Yfr;", "𝔜");
                table.set("&afr;", "𝔞");
                table.set("&bfr;", "𝔟");
                table.set("&cfr;", "𝔠");
                table.set("&dfr;", "𝔡");
                table.set("&efr;", "𝔢");
                table.set("&ffr;", "𝔣");
                table.set("&gfr;", "𝔤");
                table.set("&hfr;", "𝔥");
                table.set("&ifr;", "𝔦");
                table.set("&jfr;", "𝔧");
                table.set("&kfr;", "𝔨");
                table.set("&lfr;", "𝔩");
                table.set("&mfr;", "𝔪");
                table.set("&nfr;", "𝔫");
                table.set("&ofr;", "𝔬");
                table.set("&pfr;", "𝔭");
                table.set("&qfr;", "𝔮");
                table.set("&rfr;", "𝔯");
                table.set("&sfr;", "𝔰");
                table.set("&tfr;", "𝔱");
                table.set("&ufr;", "𝔲");
                table.set("&vfr;", "𝔳");
                table.set("&wfr;", "𝔴");
                table.set("&xfr;", "𝔵");
                table.set("&yfr;", "𝔶");
                table.set("&zfr;", "𝔷");
                table.set("&Aopf;", "𝔸");
                table.set("&Bopf;", "𝔹");
                table.set("&Dopf;", "𝔻");
                table.set("&Eopf;", "𝔼");
                table.set("&Fopf;", "𝔽");
                table.set("&Gopf;", "𝔾");
                table.set("&Iopf;", "𝕀");
                table.set("&Jopf;", "𝕁");
                table.set("&Kopf;", "𝕂");
                table.set("&Lopf;", "𝕃");
                table.set("&Mopf;", "𝕄");
                table.set("&Oopf;", "𝕆");
                table.set("&Sopf;", "𝕊");
                table.set("&Topf;", "𝕋");
                table.set("&Uopf;", "𝕌");
                table.set("&Vopf;", "𝕍");
                table.set("&Wopf;", "𝕎");
                table.set("&Xopf;", "𝕏");
                table.set("&Yopf;", "𝕐");
                table.set("&aopf;", "𝕒");
                table.set("&bopf;", "𝕓");
                table.set("&copf;", "𝕔");
                table.set("&dopf;", "𝕕");
                table.set("&eopf;", "𝕖");
                table.set("&fopf;", "𝕗");
                table.set("&gopf;", "𝕘");
                table.set("&hopf;", "𝕙");
                table.set("&iopf;", "𝕚");
                table.set("&jopf;", "𝕛");
                table.set("&kopf;", "𝕜");
                table.set("&lopf;", "𝕝");
                table.set("&mopf;", "𝕞");
                table.set("&nopf;", "𝕟");
                table.set("&oopf;", "𝕠");
                table.set("&popf;", "𝕡");
                table.set("&qopf;", "𝕢");
                table.set("&ropf;", "𝕣");
                table.set("&sopf;", "𝕤");
                table.set("&topf;", "𝕥");
                table.set("&uopf;", "𝕦");
                table.set("&vopf;", "𝕧");
                table.set("&wopf;", "𝕨");
                table.set("&xopf;", "𝕩");
                table.set("&yopf;", "𝕪");
                table.set("&zopf;", "𝕫");
				return table;
            }
        };
    }

    private LuaValue unstrip() {//killMarkers(unstripNoWiki(s))
        return new OneArgFunction() {
            @Override
            public LuaValue call(LuaValue arg) {
                return toLuaString(killMarkers(unstripNoWiki(arg.tojstring())));
            }
        };
    }

    @Override
    public LuaValue getSetupOptions() {
        LuaTable table = new LuaTable();
        table.set("nowiki_protocols", new LuaTable());
        table.set("comma", ", ");
        table.set("and", " and ");
        table.set("ellipsis", "...");
        return table;
    }
}
